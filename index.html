<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surat Izin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f9ff;
        }
        .signature-line {
            border-top: 1px solid #000;
            width: 200px;
            margin: 80px auto 0;
        }
    </style>
</head>
<body class="min-h-screen py-8 bg-gradient-to-b from-blue-50 to-indigo-100">
    <div class="container mx-auto px-4 max-w-md">
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="p-6">
                <h1 class="text-2xl font-bold text-center text-blue-800 mb-6">
                    Buatan Surat Izin dari Ketua kelas
                </h1>
                
                <form id="suratForm" class="space-y-4">
                    <div>
                        <label class="block text-gray-700 mb-1">Nama Kamu</label>
                        <input type="text" id="nama" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 mb-1">Kelas</label>
                        <input type="text" id="kelas" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 mb-1">Tanggal Izin</label>
                        <input type="date" id="tanggal" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 mb-1">Alasan Izin</label>
                        <textarea id="alasan" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required></textarea>
                    </div>
                    
                    <div class="flex justify-between pt-4">
                        <button type="button" onclick="resetForm()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">
                            Reset
                        </button>
                        <button type="button" onclick="generatePDF()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            Download Surat
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="bg-gray-50 p-6 border-t">
                <h3 class="text-lg font-semibold mb-3">Preview Surat</h3>
                <div id="preview" class="bg-white p-4 rounded border border-gray-200">
                    <p class="text-gray-500 italic">Isi form di atas untuk melihat preview</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { jsPDF } = window.jspdf;
        
        function formatDate(dateString) {
            if (!dateString) return '[tanggal]';
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return new Date(dateString).toLocaleDateString('id-ID', options);
        }
        
        function updatePreview() {
            const nama = document.getElementById('nama').value || '[Nama]';
            const kelas = document.getElementById('kelas').value || '[Kelas]';
            const tanggal = formatDate(document.getElementById('tanggal').value);
            const alasan = document.getElementById('alasan').value || '[Alasan izin]';
            
            document.getElementById('preview').innerHTML = `
                <div class="space-y-4 text-sm">
                    <p class="text-right">${tanggal}</p>
                    
                    <p>Kepada Yth,</p>
                    <p class="font-medium">bapak/ibu guru</p>
                    <p>Smk ti bali global karangasem</p>
                    
                    <p>Dengan hormat,</p>
                    
                    <p>Yang bertanda tangan di bawah ini:</p>
                    <p>Nama &nbsp;&nbsp;: ${nama}</p>
                    <p>Kelas : ${kelas}</p>
                    
                    <p>Dengan ini memohon izin karena:</p>
                    <p>${alasan}</p>
                    
                    <p>Demikian surat ini saya buat. Atas perhatiannya saya ucapkan terima kasih.</p>
                    
                    <div class="text-right mt-8">
                        <p>Hormat saya,</p>
                        <div class="signature-line"></div>
                        <p class="mt-2">${nama}</p>
                    </div>
                </div>
            `;
        }
        
        function generatePDF() {
            const nama = document.getElementById('nama').value;
            const kelas = document.getElementById('kelas').value;
            const tanggal = formatDate(document.getElementById('tanggal').value);
            const alasan = document.getElementById('alasan').value;
            
            if (!nama || !kelas || !document.getElementById('tanggal').value || !alasan) {
                alert('Harap lengkapi semua data!');
                return;
            }
            
            const doc = new jsPDF();
            
            doc.setFont('helvetica');
            doc.setFontSize(12);
            
            // Header
            doc.text(tanggal, 160, 20);
            
            // Tujuan
            doc.text('Kepada Yth,', 20, 40);
            doc.text('Bapak/ibu guru', 20, 50);
            doc.text('Smk TI bali global karangasem', 20, 60);
            
            // Isi
            doc.text('Dengan hormat,', 20, 80);
            doc.text('Yang bertanda tangan di bawah ini:', 20, 100);
            doc.text(`Nama   : ${nama}`, 30, 120);
            doc.text(`Kelas : ${kelas}`, 30, 130);
            doc.text('Dengan ini memohon izin karena:', 20, 150);
            doc.text(alasan, 30, 160, { maxWidth: 150 });
            doc.text('Demikian surat ini saya buat. Atas perhatiannya saya ucapkan terima kasih.', 20, 190);
            
            // Tanda tangan
            doc.text('Hormat saya,', 140, 220);
            doc.line(140, 230, 180, 230);
            doc.text(nama, 140, 240);
            
            doc.save(`Surat Izin untuk Edi Mahendra - ${nama}.pdf`);
        }
        
        function resetForm() {
            document.getElementById('suratForm').reset();
            updatePreview();
        }
        
        // Event listeners
        document.querySelectorAll('#suratForm input, #suratForm textarea').forEach(el => {
            el.addEventListener('input', updatePreview);
        });
        
        // Init
        document.getElementById('tanggal').valueAsDate = new Date();
        updatePreview();
    </script>
</body>
</html>
